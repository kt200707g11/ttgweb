!function(o){var t="hemiIntro";o[t]=function(e){var n=this,s={debug:!1,steps:[],startFromStep:0,backdrop:{element:o("<div>"),"class":"hemi-intro-backdrop"},popover:{template:'<div class="popover hemi-intro-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'},buttons:{holder:{element:o("<div>"),"class":"hemi-intro-buttons-holder"},next:{element:o("<a href='javascript:void(0)' class='btn-tour btn'>Next</a>"),"class":"btn btn-primary"},noThanks:{element:o("<a href='javascript:void(0)' class='btn-tour btn mgL-10'>No Thanks</a>"),"class":"btn btn-primary"},finish:{element:o("<a href='javascript:void(0)' class='btn-tour btn'>Finish</a>"),"class":"btn btn-primary"}},welcomeDialog:{show:!1,selector:"#myModal"},scroll:{anmationSpeed:500},currentStep:{selectedClass:"hemi-intro-selected"},init:function(o){},onLoad:function(o){},onStart:function(o){},onBeforeChangeStep:function(o,t){},onAfterChangeStep:function(o,t){},onShowModalDialog:function(o,t){},onHideModalDialog:function(o,t){},onComplete:function(o){}};n.options=o.extend(!0,s,e),n.options.init(n);var i=n.options.startFromStep,a=null,p=null;n.backdrop=n.options.backdrop.element.clone().addClass(n.options.backdrop["class"]),n.options.onLoad(n),n.start=function(){if(!parseInt(o("#checkUserFirst").val())&&!checkMobile())if(n.options.onStart(n),n.options.welcomeDialog.show){var e=o(n.options.welcomeDialog.selector);e.length>0?(e.on("show.bs.modal",function(o){n.options.onShowModalDialog(n,e)}),e.on("hidden.bs.modal",function(o){n.options.onHideModalDialog(n,e),n.backdrop.appendTo("body"),l(i)}),e.modal("show")):(u(t+":","Modal '"+n.options.welcomeDialog.selector+"' not found"),n.backdrop.appendTo("body"),l(i))}else l(i),".dt-header"!=n.options.steps[i].selector&&o(".dt-header").append('<div class="bg-over"></div>')},n.next=function(){n.options.steps[i+1]?l(i+1):n.finish()},n.prev=function(){l(0>i-1?i:i-1)},n.finish=function(){c()},n.goToStep=function(o){l(o)},n.getCurrentStep=function(){return p};var l=function(e){if(n.options.steps[e]){var s=n.options.steps[e];o(s.selector).length>0?(r(),a=o(s.selector),i=e,p=s,"#map-wrap"==s.selector&&a.parent().css({"z-index":11}),n.backdrop.insertAfter(a),n.options.onBeforeChangeStep(n,s),a.addClass(n.options.currentStep.selectedClass),d(function(){var t,i=o(n.options.popover.template),p="id"+Math.random().toString(30).slice(2),l=n.options.buttons.holder.element.clone().addClass(n.options.buttons.holder["class"]);n.options.steps[e+1]?(t=n.options.buttons.next.element.clone(),t.addClass(n.options.buttons.next["class"]).addClass(p),l.append(t)):(t=n.options.buttons.finish.element.clone(),t.addClass(n.options.buttons.finish["class"]).addClass(p),l.append(t)),n.options.steps[e+1]&&(t=n.options.buttons.noThanks.element.clone(),t.addClass(n.options.buttons.noThanks["class"]).addClass(p+" no-thanks"),l.append(t));var r=o("<div>").append(s.content);s.showButtons!==!1&&r.append(l.get(0).outerHTML),a.popover({content:r.get(0).outerHTML,html:!0,trigger:"manual",placement:s.placement,template:i.get(0).outerHTML}).popover("show"),a.on("shown.bs.popover",function(){n.options.onAfterChangeStep(n,s),o("."+p).on("click",function(){return"#map-wrap"==n.options.steps[e].selector?o(n.options.steps[e].selector).parent().css({"z-index":0}):".dt-header"==n.options.steps[e].selector&&o(n.options.steps[e].selector).append('<div class="bg-over"></div>'),o(this).hasClass("no-thanks")?(n.finish(),void o(".dt-header").find(".bg-over").remove()):void(n.options.steps[e+1]?n.next():(n.finish(),o(".dt-header").find(".bg-over").remove()))})})})):u(t+":","Step element not found: ",s)}else u(t+":","Step not found")},r=function(){null!==a&&(a.removeClass(n.options.currentStep.selectedClass),a.popover("destroy"))},c=function(){r(),n.backdrop.remove(),n.options.onComplete(n)},d=function(t){if("function"!=typeof t&&(t=o.noop()),p.scrollToElement!==!1){var e=20;p.offsetTop&&(e=p.offsetTop);var s=!1;o("html, body").animate({scrollTop:a.offset().top-e-70},n.options.scroll.anmationSpeed,function(){s===!1&&(t(),s=!0)})}else t()},u=function(){n.options.debug&&console.log.apply(console,arguments)};return n}}(jQuery);